{% extends "base.html" %}

{% block title %}Pace Calculator{% endblock %}


{% block content %}

<div class='inset'>
	<h3>Convert running pace</h3> <!-- <span class="time" ></span> -->
</div>
	<form method="post" name="frm1">
				<div id="pace" class="pace">
					<div data-role="fieldcontain">
						
						<label for="txtPace">Moving Time</label> <!-- class="ui-hidden-accessible" -->
						<input type="text" name="txtPace" tabindex="1" autofocus id="txtPace" placeholder="(hh:)mm:ss" data-clear-btn="true" value="{{txtPace}}"/>
						{% if error %}
						<div class="info message"><i class="icon-exclamation-sign"></i> <span>{{error}}</span></div>
						{% endif %}
					</div>
				</div>



				<div id="PreDistance" class="PreDistance">
					<div data-role="fieldcontain" >
					<label for="selUnits" >Distance</label>
					
					<select name="selUnits" tabindex="2" id="selUnits">
						<option value="">Select Units</option>
						{% if output %}
							<optgroup label="Last Selected">
								<option selected value="{{selUnits}}">{{selUnits}}</option>
							</optgroup>
						{% endif %}
						
						<optgroup label="By Pace" >
							<option value="min/km">min/km</option>
							<option value="min/mile">min/mile</option>
						</optgroup>
						<optgroup label="By Distance">

							<option value="400m">400m</option>
							<option value="800m">800m</option>
							<option value="1200m">1200m</option>
							<option value="1500m">1500m</option>
							<option value="1600m">1600m</option>
							<option value="5k">5k</option>
							<option value="10k">10k</option>
							<option value="Half">Half</option>
							<option value="Marathon">Marathon</option>					
						</optgroup>
					</select>

					
					</div>
				</div>
					
					
				
<!-- custom distances -->
			
					<div id="CustDistance" class="CustDistance hidden"> 
					
						<div data-role="fieldcontain">
							<label for="txtCustDistance">Distance</label>
							<input type="text"  name="txtCustDistance" tabindex="4" id="txtCustDistance" data-clear-btn="true" placeholder="Enter Distance"  value="{{txtCustDistance}}"/>
						</div>	
								
						<div id="rdioCustUnits" data-role="fieldcontain">
				            <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">
				                <legend class="collapse-legend">&nbsp;</legend>
				                <input id="customUnitsKm" name="customUnits" tabindex="5" value="km"  type="radio"> <!-- checked="checked" -->
				                <label for="customUnitsKm">
				                    km
				                </label>
				                <input id="customUnitsMiles" name="customUnits" tabindex="6" value="miles" type="radio">
				                <label for="customUnitsMiles">
				                    miles
				                </label>
				            </fieldset>
				        </div>
								

						
					</div>
					{% if error_units %}
					<div class="info message"><i class="icon-exclamation-sign"></i><span>{{error_units}}</span></div>
					{% endif %}
			<!-- Custom Distance selector -->

			<div id="checkboxes2" data-role="fieldcontain" class="chkCustDist">	

				<fieldset data-role="controlgroup" data-type="vertical">
					<legend class="collapse-legend">&nbsp;</legend>
					<input id="flip-custom" tabindex="3" name="flip-custom" type="checkbox">
					<label for="flip-custom">
						Activate Custom Distance
					</label>
				</fieldset>
			</div> <!-- /Custom Distance selector -->

			 <div class="submit-block">
				<fieldset class="ui-grid-solo">
					<div class="ui-block-a">
					<input type="submit" tabindex="6" value="Calculate" /> 

					</div>
				</fieldset>			
			</div>

	</form>

			<div class='inset'>
				{% if output %}
				<h3 id="results">Your calculations based on {{txtPace}}{{paceunits}} per {{selUnits}} are: </h3>


					<table data-role="table" id="table-column-toggle" data-mode="columntoggle" data-column-btn-text="" class="ui-responsive table-stroke"> 
						<thead>
							<tr>
								<th>Distance</th>
								<th class="right">Time</th>
							</tr>
						</thead>
						<tbody>
							{% for x in output|dictsort(by='value') %}
							<tr>
						
								<td>{{x[0]}}</td><td class="right">{{x[1][1]}}</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>

					
					<br>
				<span class="speed">Your running speed is {{speed}}km/h ({{speed_miles}}miles/h) </span>
				<a href="#" id="repeat" data-role="button" data-iconpos="right" data-inline="true" data-icon="repeat" class="right">Repeat</a>
				{%endif %}
			</div>

<!-- Custom scripts -->
<script>
	$(document).ready(function() {
		
    	var custDistance = "{{chkDefaultCustDist}}";
    	var mileUnits = "{{rdioDefaultUnits_miles}}";
    	
    	if (custDistance) {
    		$('#CustDistance').removeClass("hidden");
    		$('#PreDistance').addClass("hidden");
    		$('#flip-custom').prop("checked", true).checkboxradio('refresh');
    	}
	    if (mileUnits){
			$('#customUnitsMiles').prop("checked",true).checkboxradio('refresh');
			
		} else {
			$('#customUnitsKm').prop("checked",true).checkboxradio('refresh');
		}
});

</script>
<script>
	$(function(){
		var results = "{{speed}}";
		if (results){    
		  $('html, body').animate({
		    scrollTop: $('#results').offset().top
		  });
	  }
	});

function scrollToAnchor(id){
	var headerHeight = $("div#header").height();
    var aTag = $("a[name='"+ id +"']");
    var scrollToPosition = $(aTag).offset().top - headerHeight;
    $('html,body').animate({scrollTop: scrollToPosition},'fast');
	}

$("#repeat").click(function() {
   scrollToAnchor('top');
});

$(".info").show().fadeOut(5000);
</script>
<script>
		$('#flip-custom').click(function () {
	        if ($(this).is(':checked')) {
		        $('#CustDistance').removeClass("hidden");
				$('#PreDistance').addClass("hidden");
	        } else {
		        $('#CustDistance').addClass("hidden");
				$('#PreDistance').removeClass("hidden");
	        }
	        $('#flip-custom').checkboxradio('refresh');
		});

</script>


{% endblock %}
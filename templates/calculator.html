{% extends "base.html" %}

{% block title %}Pace Calculator{% endblock %}


{% block content %}

<div class='inset'>
	<h3>Convert running pace</h3> <!-- <span class="time" ></span> -->
</div>
	<form method="post" name="frm1">
				<div id="pace" class="pace">
					<div data-role="fieldcontain">
						
						<label for="txtPace">Moving Time</label> <!-- class="ui-hidden-accessible" -->
						<input type="text" name="txtPace" id="txtPace" placeholder="(hh:)mm:ss" data-clear-btn="true" value="{{txtPace}}"/>
						{% if error %}
						<div class="error"><i class="icon-warning-sign"></i> {{error}}</div>
						{% endif %}
					</div>
				</div>



				<div id="PreDistance" class="PreDistance">
					<div data-role="fieldcontain">
					<label for="selUnits" >Distance</label>
					
					<select name="selUnits" id="selUnits">
						<option value="">Select Units</option>
						{% if output %}
							<optgroup label="Last Selected">
								<option selected value="{{selUnits}}">{{selUnits}}</option>
							</optgroup>
						{% endif %}
						
						<optgroup label="By Pace" >
							<option value="min/km">min/km</option>
							<option value="min/mile">min/mile</option>
						</optgroup>
						<optgroup label="By Distance">

							<option value="400m">400m</option>
							<option value="800m">800m</option>
							<option value="1200m">1200m</option>
							<option value="1500m">1500m</option>
							<option value="1600m">1600m</option>
							<option value="5k">5k</option>
							<option value="10k">10k</option>
							<option value="Half">Half</option>
							<option value="Marathon">Marathon</option>					
						</optgroup>
					</select>

					
					</div>
				</div>
					
					
				
<!-- custom distances -->
			
					<div id="CustDistance" class="CustDistance hidden"> 
					
						<div data-role="fieldcontain">
							<label for="txtCustDistance">Distance</label>
							<input type="text"  name="txtCustDistance" id="txtCustDistance" placeholder="Enter Distance"  value="{{txtCustDistance}}"/>
						</div>	
								
						<div id="rdioCustUnits" data-role="fieldcontain">
				            <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">
				                <legend class="collapse-legend">&nbsp;</legend>
				                <input id="customUnitsKm" name="customUnits" value="km"  type="radio"> <!-- checked="checked" -->
				                <label for="customUnitsKm">
				                    km
				                </label>
				                <input id="customUnitsMiles" name="customUnits" value="miles" type="radio">
				                <label for="customUnitsMiles">
				                    miles
				                </label>
				            </fieldset>
				        </div>
								

						
					</div>
					<div class="error">{{error_units}}</div>
			<!-- Custom Distance selector -->

			<div id="checkboxes2" data-role="fieldcontain" class="chkCustDist">	

				<fieldset data-role="controlgroup" data-type="vertical">
					<legend class="collapse-legend">&nbsp;</legend>
					<input id="flip-custom" name="flip-custom" type="checkbox">
					<label for="flip-custom">
						Activate Custom Distance
					</label>
				</fieldset>
			</div> <!-- /Custom Distance selector -->

			 <div class="submit-block">
				<fieldset class="ui-grid-solo">
					<div class="ui-block-a">
					<input type="submit"  value="Calculate" /> 
					<!-- <input type="button" name="clear" value="Clear"  onclick="ClearAllControls()"/> -->
					</div>
				</fieldset>			
			</div>

	</form>

			<div class='inset'>
				{% if output %}
				<h3>Your calculations based on {{txtPace}}{{paceunits}} per {{selUnits}} are: </h3>
				

				<!-- <p class="results"> -->
					
<!-- 					{% for x in output|dictsort(by='value') %}

					<div class="{{ loop.cycle('row_odd', 'row_even') }}">{{x[0]}}<span class="time_result">{{x[1][1]}}</span></div>
					{% endfor %} -->


					
					<table data-role="table" id="table-column-toggle" data-mode="columntoggle" data-column-btn-text="" class="ui-responsive table-stroke"> 
						<thead>
							<tr>
								<th>Distance</th>
								<th class="right">Time</th>
							</tr>
						</thead>
						<tbody>
							{% for x in output|dictsort(by='value') %}
							<tr>
						
								<td>{{x[0]}}</td><td class="right">{{x[1][1]}}</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>

					
					<br>
				<span class="speed">Your running speed is {{speed}}km/h ({{speed_miles}}miles/h) </span>
				<!-- </p> -->
				{%endif %}
			</div>

<!-- Custom scripts -->
<script>
	$(document).ready(function() {
    	var custDistance = "{{chkDefaultCustDist}}";
    	var mileUnits = "{{rdioDefaultUnits_miles}}";
    	if (custDistance) {
    		$('#CustDistance').removeClass("hidden");
    		$('#PreDistance').addClass("hidden");
    		$('#flip-custom').prop("checked", true).checkboxradio('refresh');
    	}
	    if (mileUnits){
			$('#customUnitsMiles').prop("checked",true).checkboxradio('refresh');
			console.log("been ere");
		} else {
			$('#customUnitsKm').prop("checked",true).checkboxradio('refresh');

		}
	
});

</script>

<script>
		$('#flip-custom').click(function () {
	        if ($(this).is(':checked')) {
		        $('#CustDistance').removeClass("hidden");
				$('#PreDistance').addClass("hidden");
	        } else {
		        $('#CustDistance').addClass("hidden");
				$('#PreDistance').removeClass("hidden");
	        }
	        $('#flip-custom').checkboxradio('refresh');
		});

</script>
<script type='text/javascript'>
        function ClearAllControls() {
        	{
              for (i=0; i<document.forms[0].length; i++)
              {
                    doc = document.forms[0].elements[i];
                    switch (doc.type) 
                    {
                        case "text" :
                                doc.value = "";
                                break;
               
                          case "select-one" :
                                var myselect=document.getElementById("selUnits")

						        myselect.add(new Option("Select Units", "Select Units"), myselect.options[0])
						        myselect.remove(myselect.options[1])
                                break;                      
         
                          default :
                                break;
                    }
              }
        }
      
 		
	}
 
	</script>

{% endblock %}